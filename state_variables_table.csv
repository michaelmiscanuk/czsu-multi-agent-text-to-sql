State Variable,Description,Example Value
Prompt,The original user instruction to be analyzed. Serves as the input that is processed throughout the workflow.,how many people live in Prague?
Rewritten Prompt,An LLM-rewritten version of the prompt that incorporates conversation history. Functions as an optimized input for improved vector search and query generation.,What is the current population of Prague as of October 2023?
Messages,A list of two items that is always replaced; contains a summary of the conversation in the first element and the last AI message in the second item. Used to maintain conversation history with a summary and the latest message for context in LLM calls.,"[SystemMessage(""Summary of conversation...""), AIMessage(""The population is..."")]"
Iteration,A counter for tracking iterations in the workflow loop. Prevents infinite loops by limiting the number of reflection cycles.,1
Queries and Results,"A list of all SQL queries generated and executed by the LLM, along with their corresponding database results. Used in the reflection to provide feedback or in final answer to compile the response to the user.","[(""SELECT `Ukazatel`, `Roky`, ... WHERE ... = 'Praha'"", ""[['Po?et obyvatel k 31. 12. (koncový stav)', 2023, 'Praha', 'Celkem', 1384732]]"")]"
Reflection Decision,Determines whether to initiate another iteration for improvement or to finalize the current answer. Controls the workflow by routing execution based on information sufficiency.,"""improve"" or ""answer"""
Hybrid Search Results,Contains a defined number of dataset descriptions retrieved via vector search based on the user's prompt. Holds the initial results from hybrid search before reranking.,"Document(page_content=""Dataset about population statistics..."", metadata={""selection_code"": ""OBY02AHVDT01""})"
Most Similar Tables,The subset of dataset descriptions remaining after reranking. Contains the reranked tables with their relevance scores for filtering.,"[(""OBY02AHVDT01"", 0.5191313), (""OBY02AT01"", 0.43168002), (""OBY02PKT03"", 0.42785084)]"
Top Table Codes,The table codes of the most similar datasets after reranking. Provides the final dataset identifiers used for schema loading,"[""OBY02AHVDT01"", ""OBY02AT01"", ""OBY02PKT03""]"
ChromaDB Missing,A Boolean flag that halts execution if the ChromaDB vector database is unavailable. Ensures the workflow stops when essential data is missing.,FALSE
Hybrid Search Chunks,Contains a defined number of PDF chunks retrieved via vector search. Stores the initial results from hybrid search on document chunks before reranking.,"Document(page_content=""Territory of Czech Republic...""), ..."
Most Similar Chunks,"The subset of PDF chunks remaining after reranking, each with an attached Cohere relevance score. Holds the reranked chunks for final filtering.","(Document(page_content=""Population statistics for Prague...""), 0.89)"
Top Chunks,A list of the top PDF chunks that passed the relevance threshold. Serves as the final filtered content for answer synthesis.,"Document(page_content=""Territory confirms population is 1384732..."")"
Final Answer,The formatted response returned to the user. Represents the synthesized answer combining SQL results and PDF insights.,## Current Population of Prague as of October 2023 / ### SQL Data / The population is 1384732.
Follow-up Prompts,A list of suggested follow-up questions based on the conversation history. Enables continued user engagement by proposing relevant next questions.,"""Provide the latest GDP growth rates for Czechia."",
""Show me the current unemployment rates by region."""
