{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "ellipse",
      "id": "start",
      "x": 520,
      "y": 50,
      "width": 240,
      "height": 80,
      "angle": 0,
      "strokeColor": "#82b366",
      "backgroundColor": "#d5e8d4",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeStyle": "solid",
      "label": {
        "text": "üöÄ Function Entry\nmain.py",
        "fontSize": 20,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "text",
      "id": "phase1-title",
      "x": 50,
      "y": 180,
      "width": 400,
      "height": 35,
      "angle": 0,
      "strokeColor": "#0066CC",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 0,
      "opacity": 100,
      "groupIds": ["phase1"],
      "strokeStyle": "solid",
      "label": {
        "text": "PHASE 1: INITIALIZATION",
        "fontSize": 24,
        "fontFamily": 1,
        "textAlign": "left",
        "verticalAlign": "top"
      }
    },
    {
      "type": "rectangle",
      "id": "step1",
      "x": 480,
      "y": 180,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#6c8ebf",
      "backgroundColor": "#dae8fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase1"],
      "strokeStyle": "solid",
      "label": {
        "text": "üìù Resolve Input Parameters\n(prompt, thread_id, run_id)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step2",
      "x": 480,
      "y": 280,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#6c8ebf",
      "backgroundColor": "#dae8fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase1"],
      "strokeStyle": "solid",
      "label": {
        "text": "üíæ Establish Memory Baseline\n(track RSS memory usage)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step3",
      "x": 480,
      "y": 380,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#6c8ebf",
      "backgroundColor": "#dae8fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase1"],
      "strokeStyle": "solid",
      "label": {
        "text": "üóÑÔ∏è Initialize Checkpointer\n(PostgreSQL or InMemory fallback)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step4",
      "x": 480,
      "y": 480,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#6c8ebf",
      "backgroundColor": "#dae8fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase1"],
      "strokeStyle": "solid",
      "label": {
        "text": "üîß Create LangGraph Workflow\n(17 nodes across 6 stages)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "text",
      "id": "phase2-title",
      "x": 50,
      "y": 620,
      "width": 400,
      "height": 35,
      "angle": 0,
      "strokeColor": "#0066CC",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 0,
      "opacity": 100,
      "groupIds": ["phase2"],
      "strokeStyle": "solid",
      "label": {
        "text": "PHASE 2: STATE PREPARATION",
        "fontSize": 24,
        "fontFamily": 1,
        "textAlign": "left",
        "verticalAlign": "top"
      }
    },
    {
      "type": "rectangle",
      "id": "step5",
      "x": 480,
      "y": 620,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#d6b656",
      "backgroundColor": "#fff2cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase2"],
      "strokeStyle": "solid",
      "label": {
        "text": "üîç Check Existing State\n(query checkpointer for messages)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "diamond",
      "id": "decision1",
      "x": 530,
      "y": 740,
      "width": 220,
      "height": 120,
      "angle": 0,
      "strokeColor": "#d79b00",
      "backgroundColor": "#ffe6cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase2"],
      "strokeStyle": "solid",
      "label": {
        "text": "Existing\nConversation?",
        "fontSize": 18,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step6a",
      "x": 180,
      "y": 920,
      "width": 280,
      "height": 100,
      "angle": 0,
      "strokeColor": "#d6b656",
      "backgroundColor": "#fff2cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase2"],
      "strokeStyle": "solid",
      "label": {
        "text": "üÜï New Conversation\nInitialize complete state\n(13 fields + follow-up prompts)",
        "fontSize": 15,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step6b",
      "x": 820,
      "y": 920,
      "width": 280,
      "height": 100,
      "angle": 0,
      "strokeColor": "#d6b656",
      "backgroundColor": "#fff2cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase2"],
      "strokeStyle": "solid",
      "label": {
        "text": "üîÑ Continuing Conversation\nReset iteration fields\n(preserve message history)",
        "fontSize": 15,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "graph-exec",
      "x": 400,
      "y": 1100,
      "width": 480,
      "height": 180,
      "angle": 0,
      "strokeColor": "#b85450",
      "backgroundColor": "#f8cecc",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase3"],
      "strokeStyle": "solid",
      "label": {
        "text": "‚ö° EXECUTE LANGGRAPH WORKFLOW\ngraph.ainvoke()\n\n‚Ä¢ Query Rewriting\n‚Ä¢ Parallel Retrieval (DB + PDF)\n‚Ä¢ SQL Generation (MCP tools)\n‚Ä¢ Self-Correction Loop\n‚Ä¢ Answer Synthesis",
        "fontSize": 17,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "text",
      "id": "phase3-title",
      "x": 50,
      "y": 1100,
      "width": 320,
      "height": 35,
      "angle": 0,
      "strokeColor": "#CC0000",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 0,
      "opacity": 100,
      "groupIds": ["phase3"],
      "strokeStyle": "solid",
      "label": {
        "text": "PHASE 3: EXECUTION",
        "fontSize": 24,
        "fontFamily": 1,
        "textAlign": "left",
        "verticalAlign": "top"
      }
    },
    {
      "type": "text",
      "id": "phase4-title",
      "x": 50,
      "y": 1350,
      "width": 480,
      "height": 35,
      "angle": 0,
      "strokeColor": "#0066CC",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 0,
      "opacity": 100,
      "groupIds": ["phase4"],
      "strokeStyle": "solid",
      "label": {
        "text": "PHASE 4: POST-EXECUTION MONITORING",
        "fontSize": 24,
        "fontFamily": 1,
        "textAlign": "left",
        "verticalAlign": "top"
      }
    },
    {
      "type": "rectangle",
      "id": "step7",
      "x": 480,
      "y": 1350,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#9673a6",
      "backgroundColor": "#e1d5e7",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase4"],
      "strokeStyle": "solid",
      "label": {
        "text": "üìä Monitor Memory Growth\n(compare before/after RSS)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "diamond",
      "id": "decision2",
      "x": 530,
      "y": 1470,
      "width": 220,
      "height": 120,
      "angle": 0,
      "strokeColor": "#d79b00",
      "backgroundColor": "#ffe6cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase4"],
      "strokeStyle": "solid",
      "label": {
        "text": "Memory Growth\n> Threshold?",
        "fontSize": 18,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step8",
      "x": 920,
      "y": 1490,
      "width": 260,
      "height": 80,
      "angle": 0,
      "strokeColor": "#b85450",
      "backgroundColor": "#f8cecc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase4"],
      "strokeStyle": "solid",
      "label": {
        "text": "üö® Emergency Cleanup\n(force garbage collection)",
        "fontSize": 15,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "text",
      "id": "phase5-title",
      "x": 50,
      "y": 1680,
      "width": 400,
      "height": 35,
      "angle": 0,
      "strokeColor": "#0066CC",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 0,
      "opacity": 100,
      "groupIds": ["phase5"],
      "strokeStyle": "solid",
      "label": {
        "text": "PHASE 5: RESULT PROCESSING",
        "fontSize": 24,
        "fontFamily": 1,
        "textAlign": "left",
        "verticalAlign": "top"
      }
    },
    {
      "type": "rectangle",
      "id": "step9",
      "x": 480,
      "y": 1680,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#82b366",
      "backgroundColor": "#d5e8d4",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase5"],
      "strokeStyle": "solid",
      "label": {
        "text": "üì¶ Extract Key Results\n(answer, SQL queries, datasets)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step10",
      "x": 480,
      "y": 1780,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#82b366",
      "backgroundColor": "#d5e8d4",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase5"],
      "strokeStyle": "solid",
      "label": {
        "text": "üîé Filter Used Dataset Codes\n(parse SQL for table names)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step11",
      "x": 480,
      "y": 1880,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#82b366",
      "backgroundColor": "#d5e8d4",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase5"],
      "strokeStyle": "solid",
      "label": {
        "text": "üìÑ Serialize PDF Chunks\n(Document to JSON format)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "text",
      "id": "phase6-title",
      "x": 50,
      "y": 2020,
      "width": 350,
      "height": 35,
      "angle": 0,
      "strokeColor": "#0066CC",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 0,
      "opacity": 100,
      "groupIds": ["phase6"],
      "strokeStyle": "solid",
      "label": {
        "text": "PHASE 6: FINAL CLEANUP",
        "fontSize": 24,
        "fontFamily": 1,
        "textAlign": "left",
        "verticalAlign": "top"
      }
    },
    {
      "type": "rectangle",
      "id": "step12",
      "x": 480,
      "y": 2020,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#9673a6",
      "backgroundColor": "#e1d5e7",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase6"],
      "strokeStyle": "solid",
      "label": {
        "text": "üßπ Final Garbage Collection\n(release temporary resources)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "step13",
      "x": 480,
      "y": 2120,
      "width": 320,
      "height": 80,
      "angle": 0,
      "strokeColor": "#9673a6",
      "backgroundColor": "#e1d5e7",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["phase6"],
      "strokeStyle": "solid",
      "label": {
        "text": "üìù Log Memory Statistics\n(total growth & diagnostics)",
        "fontSize": 16,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "ellipse",
      "id": "end",
      "x": 520,
      "y": 2250,
      "width": 240,
      "height": 80,
      "angle": 0,
      "strokeColor": "#82b366",
      "backgroundColor": "#d5e8d4",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeStyle": "solid",
      "label": {
        "text": "‚úÖ Return Result\nAPI Response",
        "fontSize": 20,
        "fontFamily": 1,
        "textAlign": "center",
        "verticalAlign": "middle"
      }
    },
    {
      "type": "rectangle",
      "id": "legend",
      "x": 950,
      "y": 180,
      "width": 350,
      "height": 420,
      "angle": 0,
      "strokeColor": "#666666",
      "backgroundColor": "#f5f5f5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 0,
      "opacity": 100,
      "groupIds": ["legend-group"],
      "strokeStyle": "dashed",
      "label": {
        "text": "üìä KEY STATISTICS\n\nBefore Execution:\n‚úì 4 initialization steps\n‚úì Checkpointer setup\n‚úì State detection & prep\n\nDuring Execution:\n‚úì 17 workflow nodes\n‚úì Parallel retrieval\n‚úì Iterative SQL generation\n\nAfter Execution:\n‚úì Memory monitoring\n‚úì Result extraction\n‚úì Final cleanup\n\n‚è±Ô∏è PERFORMANCE\n‚Ä¢ Execution: 5-15 sec\n‚Ä¢ Memory: 50-150 MB\n‚Ä¢ Phases: 6 stages\n‚Ä¢ Decisions: 2 points",
        "fontSize": 14,
        "fontFamily": 1,
        "textAlign": "left",
        "verticalAlign": "top"
      }
    },
    {
      "type": "arrow",
      "id": "arrow-start-step1",
      "x": 640,
      "y": 130,
      "width": 0,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeStyle": "solid",
      "startBinding": {
        "elementId": "start",
        "focus": 0,
        "gap": 1
      },
      "endBinding": {
        "elementId": "step1",
        "focus": 0,
        "gap": 1
      },
      "points": [
        [0, 0],
        [0, 50]
      ],
      "lastCommittedPoint": [0, 50]
    }
  ],
  "appState": {
    "viewBackgroundColor": "#ffffff",
    "gridSize": 20
  },
  "files": {}
}
