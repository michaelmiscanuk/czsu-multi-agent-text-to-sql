<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3">
  <diagram id="langgraph-highlevel" name="LangGraph High-Level Architecture">
    <mxGraphModel dx="1600" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="&lt;b&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;Multi-Agent Text-to-SQL System Architecture&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;" parent="1" vertex="1">
          <mxGeometry x="400" y="30" width="600" height="40" as="geometry" />
        </mxCell>

        <!-- Start Node -->
        <mxCell id="start_node" value="&lt;b&gt;User Query&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;shadow=1;strokeWidth=2;gradientColor=#B9E0A5;" parent="1" vertex="1">
          <mxGeometry x="650" y="100" width="140" height="70" as="geometry" />
        </mxCell>

        <!-- Phase 1: Query Preprocessing -->
        <mxCell id="phase1" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;1. Query Preprocessing&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;• Query Rewriting&lt;br&gt;• Context Summarization&lt;br&gt;• Intent Analysis&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#3399FF;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;gradientColor=#A3D5FF;" parent="1" vertex="1">
          <mxGeometry x="600" y="210" width="240" height="100" as="geometry" />
        </mxCell>

        <!-- Phase 2: Parallel Retrieval -->
        <mxCell id="phase2_container" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;2. Hybrid Information Retrieval&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;dashed=1;dashPattern=8 4;" parent="1" vertex="1">
          <mxGeometry x="240" y="360" width="960" height="160" as="geometry" />
        </mxCell>

        <!-- Structured Data Branch -->
        <mxCell id="structured_branch" value="&lt;b&gt;Structured Data Retrieval&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;• Semantic Search&lt;br&gt;• Table Selection&lt;br&gt;• Schema Reranking&lt;br&gt;• Relevance Scoring&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#7B1FA2;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;gradientColor=#D4A5D8;" parent="1" vertex="1">
          <mxGeometry x="280" y="400" width="380" height="100" as="geometry" />
        </mxCell>

        <!-- Unstructured Data Branch -->
        <mxCell id="unstructured_branch" value="&lt;b&gt;Unstructured Data Retrieval&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;• Document Search&lt;br&gt;• Chunk Retrieval&lt;br&gt;• Context Reranking&lt;br&gt;• Relevance Filtering&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00796B;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;gradientColor=#A8D5D1;" parent="1" vertex="1">
          <mxGeometry x="780" y="400" width="380" height="100" as="geometry" />
        </mxCell>

        <!-- Phase 3: Synchronization -->
        <mxCell id="phase3" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;3. Context Synchronization&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;• Merge Retrieved Data&lt;br&gt;• Validate Relevance&lt;br&gt;• Route Processing&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9c4;strokeColor=#F57F17;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;gradientColor=#FFF59D;" parent="1" vertex="1">
          <mxGeometry x="600" y="560" width="240" height="100" as="geometry" />
        </mxCell>

        <!-- Phase 4: Query Generation Loop -->
        <mxCell id="phase4" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;4. Query Generation &amp;amp; Refinement&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;• SQL Generation&lt;br&gt;• Query Execution&lt;br&gt;• Result Reflection&lt;br&gt;• Iterative Improvement&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;gradientColor=#FFB3B3;" parent="1" vertex="1">
          <mxGeometry x="260" y="710" width="280" height="120" as="geometry" />
        </mxCell>

        <!-- Phase 5: Answer Formatting -->
        <mxCell id="phase5" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;5. Answer Formatting&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;• Results Processing&lt;br&gt;• Response Generation&lt;br&gt;• Context Summarization&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#AD1457;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;gradientColor=#F8BBD0;" parent="1" vertex="1">
          <mxGeometry x="900" y="710" width="280" height="120" as="geometry" />
        </mxCell>

        <!-- Phase 6: Finalization -->
        <mxCell id="phase6" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;6. Finalization&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;• Generate Follow-up Prompts&lt;br&gt;• Submit Final Answer&lt;br&gt;• Save Conversation&lt;br&gt;• Cleanup Resources&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#388E3C;fontSize=12;align=center;verticalAlign=top;shadow=1;strokeWidth=2;spacingTop=10;gradientColor=#A5D6A7;" parent="1" vertex="1">
          <mxGeometry x="600" y="870" width="240" height="120" as="geometry" />
        </mxCell>

        <!-- End Node -->
        <mxCell id="end_node" value="&lt;b&gt;Final Answer&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;shadow=1;strokeWidth=2;gradientColor=#B9E0A5;" parent="1" vertex="1">
          <mxGeometry x="650" y="1030" width="140" height="70" as="geometry" />
        </mxCell>

        <!-- Arrows -->
        <!-- Start to Phase 1 -->
        <mxCell id="arrow1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#3399FF;endArrow=block;endFill=1;" parent="1" source="start_node" target="phase1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Phase 1 to Phase 2 -->
        <mxCell id="arrow2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#3399FF;endArrow=block;endFill=1;" parent="1" source="phase1" target="phase2_container" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="720" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Phase 1 to Structured Branch -->
        <mxCell id="arrow3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#7B1FA2;endArrow=block;endFill=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" parent="1" source="phase1" target="structured_branch" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Phase 1 to Unstructured Branch -->
        <mxCell id="arrow4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00796B;endArrow=block;endFill=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="phase1" target="unstructured_branch" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Structured to Phase 3 -->
        <mxCell id="arrow5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#7B1FA2;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="structured_branch" target="phase3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Unstructured to Phase 3 -->
        <mxCell id="arrow6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00796B;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="unstructured_branch" target="phase3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Phase 3 to Phase 4 -->
        <mxCell id="arrow7" value="&lt;b&gt;Tables Found&lt;/b&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;endArrow=block;endFill=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=#ffffff;fontSize=10;" parent="1" source="phase3" target="phase4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Phase 3 to Phase 5 -->
        <mxCell id="arrow8" value="&lt;b&gt;Direct Answer&lt;/b&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#AD1457;endArrow=block;endFill=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=#ffffff;fontSize=10;" parent="1" source="phase3" target="phase5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Phase 4 Loop (Reflection) -->
        <mxCell id="arrow9_loop" value="&lt;b&gt;Needs Improvement&lt;/b&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;endArrow=block;endFill=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;dashed=1;dashPattern=8 4;labelBackgroundColor=#ffffff;fontSize=10;" parent="1" source="phase4" target="phase4" edge="1">
          <mxGeometry x="-0.2" y="20" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="200" y="770" />
              <mxPoint x="200" y="770" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Phase 4 to Phase 5 -->
        <mxCell id="arrow10" value="&lt;b&gt;Query Success&lt;/b&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#AD1457;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=#ffffff;fontSize=10;" parent="1" source="phase4" target="phase5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Phase 5 to Phase 6 -->
        <mxCell id="arrow11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#388E3C;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="phase5" target="phase6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="930" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Phase 6 to End -->
        <mxCell id="arrow12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#82b366;endArrow=block;endFill=1;" parent="1" source="phase6" target="end_node" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend_title" value="&lt;b&gt;Legend&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="50" y="100" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend_preprocessing" value="Query Processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#3399FF;fontSize=10;shadow=1;strokeWidth=1;gradientColor=#A3D5FF;" parent="1" vertex="1">
          <mxGeometry x="40" y="140" width="120" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend_structured" value="Structured Data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#7B1FA2;fontSize=10;shadow=1;strokeWidth=1;gradientColor=#D4A5D8;" parent="1" vertex="1">
          <mxGeometry x="40" y="180" width="120" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend_unstructured" value="Unstructured Data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00796B;fontSize=10;shadow=1;strokeWidth=1;gradientColor=#A8D5D1;" parent="1" vertex="1">
          <mxGeometry x="40" y="220" width="120" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend_sync" value="Synchronization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9c4;strokeColor=#F57F17;fontSize=10;shadow=1;strokeWidth=1;gradientColor=#FFF59D;" parent="1" vertex="1">
          <mxGeometry x="40" y="260" width="120" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend_query" value="Query Generation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;shadow=1;strokeWidth=1;gradientColor=#FFB3B3;" parent="1" vertex="1">
          <mxGeometry x="40" y="300" width="120" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend_answer" value="Answer Formatting" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#AD1457;fontSize=10;shadow=1;strokeWidth=1;gradientColor=#F8BBD0;" parent="1" vertex="1">
          <mxGeometry x="40" y="340" width="120" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend_finalize" value="Finalization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#388E3C;fontSize=10;shadow=1;strokeWidth=1;gradientColor=#A5D6A7;" parent="1" vertex="1">
          <mxGeometry x="40" y="380" width="120" height="30" as="geometry" />
        </mxCell>

        <!-- Notes -->
        <mxCell id="note1" value="&lt;i&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;Parallel execution for optimized performance&lt;/font&gt;&lt;/i&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;" parent="1" vertex="1">
          <mxGeometry x="240" y="330" width="250" height="20" as="geometry" />
        </mxCell>

        <mxCell id="note2" value="&lt;i&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;Iterative refinement until satisfactory&lt;/font&gt;&lt;/i&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;" parent="1" vertex="1">
          <mxGeometry x="40" y="710" width="200" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

